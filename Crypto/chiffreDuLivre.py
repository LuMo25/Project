import reimport random#suprime caractère non vouludef supr(S) :    S = ''.join([x[0] for x in zip(S, S.upper()) if x[0] != x[1]])    S= re.sub('[^A-Za-z0-9]+', '', S)    return S#Creation du dictionnairedef dictionnaire(S):    word = list(S)    dico={}    for x in range(0,len(word)):        if word[x] in dict.keys(dico):            dico[word[x]] = dico[word[x]],x        else:            dico[word[x]]= x    return dico#Chiffrage lettre par lettredef Chiffrage(lettre,cléDictionnaire):    #len(cléDictionnaire.fromkeys(lettre))    if isinstance(cléDictionnaire.get(lettre), int)==False:       a=flatten(cléDictionnaire.get(lettre))       a=random.choice(a)       return a    else:        return cléDictionnaire.get(lettre)#Chiffrage d'un texte entierdef Chiffrage_Text(texte,cléDictionnaire):    liste=[0]*len(texte)    for x in range(0,len(texte)):        liste[x]=Chiffrage(texte[x],cléDictionnaire)    return liste#Sert à transformer une liste multidimensionel en liste simpledef flatten(x):    result = []    for el in x:        if hasattr(el, "__iter__") and not isinstance(el, str):            result.extend(flatten(el))        else:            result.append(el)    return result#Déchiffrement lettre chiffrédef DChiffrage(chiffre,cléDictionnaire):    a=flatten(cléDictionnaire.items())    index = a.index(chiffre)    while type(a[index]) != str:        index = index-1    return a[index]#Déchiffrage text chiffrédef DChiffrage_Text(texteChiffré,cléDictionnaire):    liste=[0]*len(texteChiffré)    for x in range(0,len(texteChiffré)):        liste[x]=DChiffrage(texteChiffré[x],cléDictionnaire)    return listedef main():    print("Bonjour, souhaitez vous commencer par: ")    print("1 : Dechiffrage du fichier txt 1 avec la clé 1?")    print("2 : Cryptage/déccryptage d'une fable de la fontaine?")    choix=0    while choix<1 or choix>2:        choix = eval(input())    if choix==1:        fichierADechiffrer=open('chiffre1.txt','r')        monTexte = fichierADechiffrer.readlines()        print(monTexte)        monTexte = ''.join(monTexte)        monTexte= monTexte.split(",")        fichierClé=open('cle1.txt','r')        liste = fichierClé.read()        liste = supr(liste)        dict = dictionnaire(liste)        chiffrage = Chiffrage_Text(liste,dict)        print(type(chiffrage))        print(chiffrage)        print(', '.join(DChiffrage_Text(chiffrage,dict)))        print(DChiffrage_Text(monTexte,dict))    if choix==2:        liste="HaeMléééo! 12345  what'DZAzaeas your name?"        liste = supr(liste)        dict = dictionnaire(liste)        chiffrage = Chiffrage_Text(liste,dict)        print(type(chiffrage))        print(chiffrage)        print(', '.join(DChiffrage_Text(chiffrage,dict)))main()